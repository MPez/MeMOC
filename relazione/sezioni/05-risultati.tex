%\clearpage
\section{Risultati}
\label{sec:risultati}
I programmi sono stati eseguiti mediante il seguente comando:
\begin{quotation}
\script{bash eserc\_lab.sh -a 20}
\end{quotation}
che esegue l'intero processo, generando 20 problemi simili per ogni incremento della densità dei nodi, pari a $10$, per le istanze \emph{casuali} e \emph{cluster}; mentre vengono generati solamente 20 problemi con istanze \emph{circolari} in quanto non è presente casualità nella loro generazione.

In totale sono quindi state generate $1020$ istanze, $200$ di tipo casuale, $800$ di tipo cluster e $20$ di tipo circolare.

I grafici riportano sull'asse delle ascisse il numero di nodi del problema, mentre sull'asse delle ordinate il tempo in secondi che è servito per trovare la soluzione oppure il costo rappresentato in unità o in percentuale, da notare che si è scelto di rappresentare il tempo in scala logaritmica.


I punti di interesse sono quelli identificati dal simbolo presente nella legenda di ogni grafico e rappresentano la media dei risultati ottenuti per le istanze simili, mentre le linee verticali indicano la variabilità nei risultati individuata tramite la deviazione standard.

\subsection{CPLEX}

In figura \ref{fig:all cplex} sono riportati i tempi di esecuzione ottenuti mediante \acronimo{cplex} per tutte le tipologie di istanze risolte.
A primo impatto si vede come le istanze circolari sono quelle che richiedono il minor tempo a parità di dimensione per giungere alla soluzione: questo è dovuto alla semplicità intrinseca di questi problemi che sono quindi più facili da risolvere.
Da notare come l'andamento del grafico non sia molto regolare: questo fatto probabilmente è dovuto al carico del processore al momento dell'esecuzione del test, che può non essere stato costante durante il periodo di prova.

Per quanto riguarda le altre due tipologie di problemi, casuali e cluster, notiamo che hanno un andamento esponenziale con il crescere del numero dei nodi: per istanze piccole il tempo di risoluzione è abbastanza rapido, ma sale molto velocemente, fino a oltre $200s$, con l'aumentare dei nodi.

È possibile vedere come con ogni tipologia di istanza a parità di numero di nodi e quindi di complessità del problema, le prestazioni del programma siano simili.
È presente solo un leggero aumento nei tempi per quanto riguarda le istanze a $2$ cluster: esse infatti sono costruite utilizzando due quarti opposti della griglia, creando quindi maggiori difficoltà nella risoluzione in quanto i nodi si trovano in due zone distanti e separate fra loro.
Nei casi con $3$ e $4$ cluster invece la griglia ha una quantità di nodi maggiori ed è meno evidente la separazione tra gli stessi cluster.

\begin{figure}[H]
	\centering
	\includegraphics[width=.9\textwidth]{immagini/cplex_all.pdf}
	\caption{Istanze casuali, cluster e circolari - \script{cplex}}
	\label{fig:all cplex}
\end{figure}

Per avere un dettaglio migliore del comportamento dell'algoritmo con le diverse tipologie di problemi si rimanda all'appendice \ref{sec:grafici}, dove sono inseriti i grafici relativi ai tempi di risoluzione suddivisi per tipo di istanza, figura \ref{fig:casuali cplex} per istanze casuali, figura \ref{fig:circolari cplex} per quelle circolari e figura \ref{fig:cluster cplex} per quelle cluster.

Inoltre, in appendice \ref{sec:tabelle}, sono riportati tutti i tempi e i costi medi ottenuti nella tabella \ref{tab:casuali} per le istanze casuali, in tabella \ref{tab:circolari} per quelle circolari e in tabella \ref{tab:cluster} per quelle cluster.

Il costo medio per le istanze casuali non è molto significativo in quanto il simplesso è un algoritmo esatto e ogni istanza è diversa dall'altra, di conseguenza il costo esatto delle rispettive soluzioni è diverso.
Tale media verrà però utilizzata per fare un confronto con \tabu in modo da valutare la bontà delle soluzioni trovate da tale metaeuristica.


\subsection{Tabu Search}

Ho scelto di utilizzare la metaeuristica \tabu per risolvere solo alcuni dei problemi generati precedentemente: mi sono concentrato infatti sulle istanze generate casualmente e su quelle cluster; dal momento che la mia implementazione presenta una generazione della soluzione di partenza randomizzata, ho risolto $20$ volte ogni istanza in modo da avere dati statistici apprezzabili.

La \tabu ha un parametro chiamato \emph{tabu tenure} che permette di determinare la lunghezza della \emph{tabu list} determinando quindi, quando settato in modo appropriato, un miglioramento per quanto riguarda il valore della soluzione trovata, che dovrebbe avvicinarsi maggiormente al valore esatto calcolato da \acronimo{cplex}.
Questo accade in quanto, con un apposito valore di \emph{tabu tenure}, si evita di far ciclare il solutore sulle stesse soluzioni.
La \emph{tabu tenure} deve essere aumentata con l'aumentare della dimensione dei problemi da risolvere in modo da permettere all'algoritmo di esplorare maggiormente lo spazio delle soluzioni.

Il modo migliore per testare questa caratteristica mi è sembrato quello di effettuare la risoluzione delle istanze con diversi valori e riportarle su grafico in modo da capire i miglioramenti ottenuti.
Ho scelto di provare i valori di \emph{tabu tenure} tra $4$ e $8$, dato che erano i valori suggeriti per la dimensione dei problemi che ho usato.

Avendo sviluppato due varianti per la scelta della soluzione di partenza e per la strategia di esplorazione, ho dovuto effettuare dei test per scegliere quali fossero le versioni migliori da usare.
Ho dovuto combinare le diverse strategie ottenendo quattro algoritmi alternativi, elencati di seguito in ordine di efficacia:
\begin{enumerate}
	\item Best neighbour - Shuffle
	\item Best neighbour - Farthest insertion 
	\item Random k neighbour - Shuffle
	\item Random k neighbour - Farthest insertion
\end{enumerate}
In questo modo ho valutato quale fosse la combinazione migliore da usare per il resto del progetto.
I risultati sono visibili in appendice \ref{sec:grafici} dove sono presenti i grafici relativi ai tempi (\ref{fig:tempi tabu}) e ai costi (\ref{fig:costi tabu}) delle istanze casuali risolte con le precedenti varianti.

I test hanno evidenziato che ordinare casualmente la soluzione di partenza e scegliere il miglior vicino possibile porta ad ottenere risultati migliori in termini di qualità della soluzione finale al crescere del numero di nodi.
La \emph{Farthest insertion} peggiora di poco il valore della soluzione e la scelta casuale di un vicino tra i $k$ migliori vicini porta ai risultati peggiori.

Se si osservano i tempi di risoluzione si nota che la \emph{Best neighbour - Farthest insertion} con \emph{tabu tenure} più basse termina più velocemente mentre la \emph{Best neighbour - Shuffle} è la più lenta tra le quattro.
Con l'aumentare della \emph{tabu tenure} le differenze si assottigliano ma la \emph{Best neighbour - Shuffle} tende ad impiegare più tempo a trovare la soluzione rispetto alle altre, soprattutto con un alto numero di nodi.

Visti i risultati ottenuti ho scelto la versione \emph{Best neighbour - Shuffle} che riesce a calcolare la soluzione migliore in un tempo di poco superiore alle altre.


\subsubsection{Istanze Casuali}
In figura \ref{fig:all tempi tabu} è riportato il grafico complessivo relativo ai tempi di risoluzione dei problemi casuali mediante l'algoritmo \tabu; si può notare subito come i tempi siano molto bassi rispetto a quanto visto per \acronimo{cplex} e seguano un andamento esponenziale.
Inoltre le prestazioni non cambiano con diversi valori di \emph{tabu tenure} come, infatti, ci si aspetta.

In figura \ref{fig:all costi tabu}, invece, troviamo il grafico relativo alle medie dei costi delle soluzioni che sono state trovate: si può notare che al crescere del numero dei nodi si intravede un miglioramento con valori di \emph{tabu tenure} più alti, mentre con istanze di piccole dimensioni le differenze sono praticamente nulle.

\begin{figure}[H]
	\centering
	\begin{subfigure}[b]{.45\textwidth}
			\includegraphics[width=\textwidth]{tabu_all_tempo}
			\caption{Tempi}
			\label{fig:all tempi tabu}
	\end{subfigure}
	\quad
	\begin{subfigure}[b]{.45\textwidth}
			\includegraphics[width=\textwidth]{tabu_all_costo}
			\caption{Costi}
			\label{fig:all costi tabu}
	\end{subfigure}
	\caption{Istanze casuali - \tabu}
	\label{fig:all tempi costi tabu}
\end{figure}

Per avere un'idea precisa dei valori trovati si rimanda ai grafici in figura \ref{fig:tempi tabu} relativi ai tempi, a quelli in figura \ref{fig:costi tabu} relativi ai costi posti in appendice \ref{sec:grafici} e alla tabella \ref{tab:tabu} posta in appendice \ref{sec:tabelle}, che riporta tutti i risultati ottenuti.

\subsubsection{Istanze cluster}
Le istanze cluster confermano quanto visto per le istanze casuali: i tempi di risoluzione mediante \tabu sono molto inferiori rispetto a \acronimo{cplex}.
In figura \ref{fig: tabu cluster tempo} sono riportati i grafici relativi ai tempi di risoluzione, ogni grafico contiene i valori riscontrati per le 4 tipologie di cluster analizzati: si nota come non vi sia grande differenza e l'andamento sia pressoché identico per diversi valori di \emph{tabu tenure}.

Lo stesso discorso vale anche per la media dei costi ottenuti: in figura \ref{fig: tabu cluster costo} sono riportati i grafici riguardanti i costi calcolati dall'algoritmo; per un basso numero di nodi non si notano differenze tra diversi valori di \emph{tabu tenure}, per un numero alto di nodi la differenza è di poco più marcata a vantaggio di \emph{tabu tenure} più alte.

\begin{figure}[H]
	\centering
	\begin{subfigure}[b]{.45\textwidth}
		\includegraphics[width=\textwidth]{tabu_cluster_1_tempo}
		\caption{Istanze 1 cluster}
		\label{fig:tabu cluster 1 tempo}
	\end{subfigure}
	\quad
	\begin{subfigure}[b]{.45\textwidth}
		\includegraphics[width=\textwidth]{tabu_cluster_2_tempo}
		\caption{Istanze 2 cluster}
		\label{fig:tabu cluster 2 tempo}
	\end{subfigure}
	\\
	\begin{subfigure}[b]{.45\textwidth}
		\includegraphics[width=\textwidth]{tabu_cluster_3_tempo}
		\caption{Istanze 3 cluster}
		\label{fig:tabu cluster 3 tempo}
	\end{subfigure}
	\quad
	\begin{subfigure}[b]{.45\textwidth}
		\includegraphics[width=\textwidth]{tabu_cluster_4_tempo}
		\caption{Istanze 4 cluster}
		\label{fig:tabu cluster 4 tempo}
	\end{subfigure}
	\caption{Istanze cluster - \tabu{} - Tempi}
	\label{fig: tabu cluster tempo}
\end{figure}



\begin{figure}[H]
	\centering
	\begin{subfigure}[b]{.45\textwidth}
		\includegraphics[width=\textwidth]{tabu_cluster_1_costo}
		\caption{Istanze 1 cluster}
		\label{fig:tabu cluster 1 costo}
	\end{subfigure}
	\quad
	\begin{subfigure}[b]{.45\textwidth}
		\includegraphics[width=\textwidth]{tabu_cluster_2_costo}
		\caption{Istanze 2 cluster}
		\label{fig:tabu cluster 2 costo}
	\end{subfigure}
	\\
	\begin{subfigure}[b]{.45\textwidth}
		\includegraphics[width=\textwidth]{tabu_cluster_3_costo}
		\caption{Istanze 3 cluster}
		\label{fig:tabu cluster 3 costo}
	\end{subfigure}
	\quad
	\begin{subfigure}[b]{.45\textwidth}
		\includegraphics[width=\textwidth]{tabu_cluster_4_costo}
		\caption{Istanze 4 cluster}
		\label{fig:tabu cluster 4 costo}
	\end{subfigure}
	\caption{Istanze cluster - \tabu{} - Costi}
	\label{fig: tabu cluster costo}
\end{figure}

Come per le istanze casuali si rimanda all'appendice per avere un'idea più dettagliata dei valori riscontrati.
Dalla tabella \ref{tab:tabu cluster 1} alla tabella \ref{tab:tabu cluster 4} sono elencati i dati ottenuti con le istanze cluster.

